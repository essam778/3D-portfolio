import{_ as e,u as t,j as r,C as a,P as n,i as s}from"./index-88e1c688.js";import{r as o}from"./react-189b6ca2.js";import{k as i,a0 as c,aB as l,E as u,f as d}from"./three-33ad87d2.js";import"./motion-ece60608.js";const m=(()=>parseInt(i.replace(/\D+/g,"")))(),f=m>=154?"opaque_fragment":"output_fragment";class p extends c{constructor(e){super(e),this.onBeforeCompile=(e,t)=>{const{isWebGL2:r}=t.capabilities;e.fragmentShader=e.fragmentShader.replace(`#include <${f}>`,`\n        ${r?`#include <${f}>`:`#extension GL_OES_standard_derivatives : enable\n#include <${f}>`}\n      vec2 cxy = 2.0 * gl_PointCoord - 1.0;\n      float r = dot(cxy, cxy);\n      float delta = fwidth(r);     \n      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\n      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );\n      #include <tonemapping_fragment>\n      #include <${m>=154?"colorspace_fragment":"encodings_fragment"}>\n      `)}}}const g=o.forwardRef((t,r)=>{const[a]=o.useState(()=>new p(null));return o.createElement("primitive",e({},t,{object:a,ref:r,attach:"material"}))});let b,h;const y=o.createContext(null),x=new u,E=new d,A=o.forwardRef(({children:r,range:a,limit:n=1e3,...s},i)=>{const c=o.useRef(null);o.useImperativeHandle(i,()=>c.current,[]);const[u,d]=o.useState([]),[[m,f,p]]=o.useState(()=>[new Float32Array(3*n),Float32Array.from({length:3*n},()=>1),Float32Array.from({length:n},()=>1)]);o.useEffect(()=>{c.current.geometry.attributes.position.needsUpdate=!0}),t(()=>{for(c.current.updateMatrix(),c.current.updateMatrixWorld(),x.copy(c.current.matrixWorld).invert(),c.current.geometry.drawRange.count=Math.min(n,void 0!==a?a:n,u.length),b=0;b<u.length;b++)h=u[b].current,h.getWorldPosition(E).applyMatrix4(x),E.toArray(m,3*b),c.current.geometry.attributes.position.needsUpdate=!0,h.matrixWorldNeedsUpdate=!0,h.color.toArray(f,3*b),c.current.geometry.attributes.color.needsUpdate=!0,p.set([h.size],b),c.current.geometry.attributes.size.needsUpdate=!0});const g=o.useMemo(()=>({getParent:()=>c,subscribe:e=>(d(t=>[...t,e]),()=>d(t=>t.filter(t=>t.current!==e.current)))}),[]);return o.createElement("points",e({userData:{instances:u},matrixAutoUpdate:!1,ref:c,raycast:()=>null},s),o.createElement("bufferGeometry",null,o.createElement("bufferAttribute",{attach:"attributes-position",count:m.length/3,array:m,itemSize:3,usage:l}),o.createElement("bufferAttribute",{attach:"attributes-color",count:f.length/3,array:f,itemSize:3,usage:l}),o.createElement("bufferAttribute",{attach:"attributes-size",count:p.length,array:p,itemSize:1,usage:l})),o.createElement(y.Provider,{value:g},r))}),j=o.forwardRef(({children:r,positions:a,colors:n,sizes:s,stride:i=3,...c},u)=>{const d=o.useRef(null);return o.useImperativeHandle(u,()=>d.current,[]),t(()=>{const e=d.current.geometry.attributes;e.position.needsUpdate=!0,n&&(e.color.needsUpdate=!0),s&&(e.size.needsUpdate=!0)}),o.createElement("points",e({ref:d},c),o.createElement("bufferGeometry",null,o.createElement("bufferAttribute",{attach:"attributes-position",count:a.length/i,array:a,itemSize:i,usage:l}),n&&o.createElement("bufferAttribute",{attach:"attributes-color",count:n.length/i,array:n,itemSize:3,usage:l}),s&&o.createElement("bufferAttribute",{attach:"attributes-size",count:s.length/i,array:s,itemSize:1,usage:l})),r)}),z=o.forwardRef((t,r)=>t.positions instanceof Float32Array?o.createElement(j,e({},t,{ref:r})):o.createElement(A,e({},t,{ref:r}))),v=()=>{const e=o.useRef(),a=s(new Float32Array(4500),{radius:1.2});return t((t,r)=>{e.current&&(e.current.rotation.x-=r/10,e.current.rotation.y-=r/15)}),r.jsx("group",{ref:e,rotation:[0,0,Math.PI/4],children:r.jsx(z,{positions:a,stride:3,frustumCulled:!0,children:r.jsx(g,{transparent:!0,color:"#f272c8",size:.002,sizeAttenuation:!0,depthWrite:!1})})})},S=()=>r.jsx("div",{className:"stars-canvas-container",children:r.jsxs(a,{camera:{position:[0,0,1]},children:[r.jsx(o.Suspense,{fallback:null,children:r.jsx(v,{})}),r.jsx(n,{all:!0})]})});export{S as default};
